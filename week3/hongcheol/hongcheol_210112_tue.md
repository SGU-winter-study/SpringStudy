# 모든 것이 HTTP
거의 모든 형태의 데이터를 전송할 수 있다. 심지어 서버간의 통신을 할 때, HTTP를 이용해서 전송을한다.

http는 클라이언트 서버 구조로 되어있다.
클라이언트는 서버에 요청을 보내고, 응답을 대기한다.
서버는 요청에대한 결과를 만들어서 응답을 한다.
클라이언트와 서버를 개념적으로 분리해서 비즈니스 로직이나 데이터는 서버에 밀어넣고, 클라이언트는 UI 같은 어떻게 화면에 그릴까만 고민하면 된다.


http는 무상태를 지향한다.
stateful과 stateless의 차이
stateful은 서버가 클라이언트의 이전 상태를 보존한다.
stateless
서버가 클라이언트의 상태를 보존하지않는다. -> 서버 확장성이 높다. 무한한 서버 증설이 가능하다. 대신 클라이언트가 추가적인 정보를 줘야한다.
stateful에서는 서버 1이 담당하던 클라이언트를 서버2에서 처리하기 어렵다.
stateless는 서버 1에서 오류나면 서버2로 던져버린다.


하지만, 데이터를 너무 많이 보내야한다는 단점이 있다.

최소한의 상태유지를 해야한다.
로그인 상태 등등
일반적으로 브라우저 쿠키와 서버 세션 등을 사용해서 상태를 유지

TCP/IP는 기본적으로 연결을 유지한다.
응답을 요청하고 받으면 연결을 끊어버림
최소한의 자원을 유지하면서 서버 자원을 아낄 수 있다. 요청 올 때, 연결을 하는 것.

HTTP는 기본적으로 연결을 유지하지않는 모델이다. 

# HTTP 메시지
시작라인
request-line / status-line이 있다.
GET, POST, PUT, DELETE 등등.. express 튜토리얼 때 사용했던 기능을 잘 생각해보면 이해가 쉬울 것이다.

OWS - 띄어쓰기 허용

field-name은 대소문자 구분을 하지않는다.
HTTP 헤더에는 전송에 필요한 모든 부가정보가 들어있다. 메세지 바디를 빼고 관련된 메타데이터가 다 들어있다고 생각해도 무방하다.

HTTP 바디에는 실제 전송할 데이터가 들어있다.

# HTTP 메서드
HTTP API 설계
URI 설계시 가장 중요한 것은 리소스 식별.
리소스와 리소스로 하는 행위를 분리해야한다.
행위는 HTTP 메서드로 구분한다.
리소스로 최대한 URI를 설계하되, 어쩔 수 없는 경우에는 컨트롤 URI를 사용한다.
GET : 리소스 조회
1. url(path)에 있는 데이터를 주세요라는 의미
2. 서버에 전달하고싶은 데이터는 쿼리를 통해서 전달한다.
3. 조회할 때는 GET이 유리하다. 서버끼리의 약속이 있기때문.
POST : 요청 데이터 처리, 주로 등록
1. 서버 너한테 데이터를 줄테니까 받아서 요청데이터를 처리해달라고 부탁하는 것
2. 메시지 바디를 통해서 서버로 요청 데이터를 전달한다. 보통 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행한다.
3. 포스트는 메세지를 내부에 담아서 할 수 있는 모든걸 할 수 있다. 단, 캐싱 같은게 어렵다.
4. 포스트는 무적이다.

PUT : 리소스 대체나 생성
1. 리소스가 있으면 완전히 대체, 없으면 생성. 즉, 덮어쓰기를 하는 것임. 기존 리소스를 삭제하고 완전히 대체하기 때문에, 부분 수정이 불가능하다. (부분 수정은 PATCH)
2. /*중요*/ 클라이언트가 리소스를 식별한다. 클라이언트가 리소스의 전체 위치를 알고 URI를 지정한다.  클라이언트가 딱 지정한다.
이게 POST와 가장 큰 차이다. 

PATCH : 리소스 부분변경(게임 패치 생각)
1. 부분적으로 리소스의 데이터를 바꾸고 싶을 때, 사용
DELETE : 
1. 삭제

HEAD - GET과 동일, 상태줄과 헤더만 변환할 수 있다.
OPTIONS 대상 리소스에대한 통신기능 옵션을 설명(주로 CORS에서 사용)
——거의 사용하지않음
CONNECT 대상 자원으로 식별되는 서버에대한 터널을 설정
TRACE 대상 리소스에대한 경로를 따라 메시지 루프백 테스트를 수행

# HTTP 메서드의 속성
1. 안전 - 호출해도 리소스를 변경하지않는가? 해당 리소스가 변하냐 안변하냐에 초점을 맞춘다.
2. 멱등 -  몇 번을 호출하든 항상 똑같은 결과가 똑같다. 외부 요인으로 중간에 리소스가 변경되는 것까지는 고려하지않는다.
3. 캐시가능 - 응답 결과 리소스를 캐시해서 사용해도 되는지?(GET,HEAD,POST,PATCH)캐시가능. 
키를 잡고 캐시를 사용하는 방식인데, POST,PATCH는 본문 내용까지 캐시키로 고려하는데, 이게 구현이 쉽지않다. 따라서 실무에서는 GET에서만 쓴다고 생각해도 무관.
