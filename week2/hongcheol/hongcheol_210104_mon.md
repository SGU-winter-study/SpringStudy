# 스프링 컨테이너 생성

AppConfig.class를 파라미터로 받아서 스프링 컨테이너를 생성한다. 컨테이너 생성시에는 구성 정보를 지정해줘야하는데 AppConfig.class가 그 역할을 한다.


생성된 스프링 컨테이너는 파라미터로 넘어오 설정 클래스 정보를 사용해서 스프링 빈을 등록한다. 
빈의 이름은 메서드 이름을 사용한다. 직접 부여도 가능하다. 하지만, 항상 다른 이름을 부여해야한다.

빈을 생성하는 과정과 의존관계를 설정하는 과정이 나뉘어있다.
빈을 등록했다면 빈 의존관계 설정을 해준다.
스프링 컨테이너는 설정 정보를 참고해서 DI를 해준다.

테스트를 통해서 모든 빈을 출력해보면 스프링 내부적으로 등록하는 애들도 나온다. 
내가 등록한 빈만 보고싶다면 빈에대한 메타데이션 정보를 담고있는 beanDefinition을 꺼내준 다음에, getRole()을 통해서 애플리케이션에 해당하는 것만 가져오면 된다.

빈을 조회할 때, 인터페이스로 조회하면 인터페이스의 구현체가 대상이된다.

조회했는데, 동일한 타입이 둘 이상인 경우
-> 빈 이름을 지정하면서 오류를 피할 수 있다.
ac.getBeansOfType()을 사용해서 해당 타입의 모든 빈을 조회 가

테스트 코드 안에서 Config  를 만들어서 쓸 수 있다.
클래스 스코프 안에다가 만들어주면 된다.

상속관계가 있는 경우에, 부모 타입을 조회하면 자식 타입은 다 끌려나온다는 대원칙을 가지고 움직인다.
Map<String, 조회하고싶은 타입> beansOfType


공부할 때, 테스트에서 출력문을 만들어도 괜찮지만, 실무에서는 없는게 좋다.

# 빈 팩토리와 어플리케이션 컨텍스트
 빈 팩토리는 스프링 컨테이너의 최상위 인터페이스로 스프링 빈을 관리하고 조회하는 역할을 담당한다. 이를 상속받아서 사용하면서 수많은 부가기능을 하도록 하는 것이 어플리케이션 컨택스트다.
ex) 
메세지소스를 활용한 국제화 기능(번역 등등)
환경변수(로컬, 개발, 운영 등을 구분해서 처리함)
애플리케이션 이벤트(이벤트를 발행하고 구독하는 모델을 편리하게 지원)
편리한 리소스 조회(파일, 클래스패스, 외부 등에서 리소스를 편리하게 조회할 수 있다.)

우리는 빈 팩토리를 직접 사용할 일이 없고, 부가기능이 포함된 어플리케이션 컨택스트를 사용한다.

여기서 설명한 빈 팩토리와 어플리케이션 컨택스트가 바로 지금까지 설명했던 스프링 컨테이너다.

# 다양한 설정 형식 지원
스프링 컨테이너는 다양한 형식의 설정 정보를 받아드릴 수 있게 유연한 설계를 가지고있다.

xml도 가능해서 전자정부에서 사용하는듯..
XML 을 사용하면 컴파일 없이 빈 설정 정보를 변경할 수 있다는 장점이 있다.

# BeanDefinition
스프링이 다양한 설정 형식을 지원하는 이유 중 핵심

역할과 구현을 개념적으로 나눠서 어떤 형식으로 설정된 정보인지 관계없이 그냥 설정된 것을 가져와서 구성하는 역할을 하는 것이다. 즉 스프링 컨테이너는 BeanDefinition에만 의존한다는 것이다.

빈의 메타정보를 담고있다.
스프링이 다양한 형태의 설정 정보를 BeanDefinition을 이용해 추상화해서 사용한다. 실무에서 직접 생성하거나 정의해서 사용하는 일은 거의 없다. 가끔 코드에서 보이면 추상화하는 메커니즘을 떠올리면 이해에 도움이 될 것이다.

GenericXmlApplicationContext을 쓴 이유는 
ApplicationContext을 쓰면 getBeanDefinition을 못 써서다. 그냥 그렇구나하고 사용하면 된다.

# 단축키
<br>iter + tab하면 리스트나 배열 있으면 for문 자동완성

<br>command + D 복붙

<br>command E  enter - 이전 코드로 바로 이동
