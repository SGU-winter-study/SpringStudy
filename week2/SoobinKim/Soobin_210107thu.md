# 의존관계 자동 주입
## 다양한 의존관계 주입 방법
스프링 컨테이너는 크게 1) 스프링 빈을 생성하는 단계 2) 의존관계를 주입하는 단계의 두 단계로 나눠지게 된다.

의존관계 주입(DI, Dependency Injection)에는 크게 4가지 방법이 있다.
* 생성자 주입
* 수정자 주입(setter 주입)
* 필드 주입
* 일반 메소드 주입

각각에 대하여 자세히 알아보면 다음과 같다.
※ 의존관계 자동 주입은 스프링 컨테이너에 의해 관리되는 스프링 빈이어야지만 동작한다.

1. 생성자 주입
생성자에 @Autowired를 붙임으로써 생성자를 통해서 의존 관계를 주입하는 방법. ComponentScan을 통해 스프링 컨테이너에 @Component annotation이 붙은 클래스가 등록이 될 때, 생성자가 호출되면 스프링 컨테이너에서 Bean을 꺼내 주입해줌으로써 의존관계를 주입한다.
	- 생성자가 호출되는 시점에 주입되므로 단 1번만 호출되는 것이 보장된다.
	- 불변, 필수 의존관계에 주로 사용된다.
	- 스프링 빈에서 생성자가 한 개만 존재하는 경우 @Autowired가 없어도 스프링에서 알아서 의존관계를 주입해준다.

2. 수정자 주입
setter라는 수정자 메소드를 통해 의존관계를 주입하는 방법이다.
스프링 빈으로 등록하면서 동시에 의존관계 주입까지 한번에 일어나게 되는 생성자 주입과 달리(스프링 빈에 등록하기 위해서는 반드시 생성자를 호출해야 하므로), 수정자 주입은 스프링 빈으로 등록되는 단계와 분리된다.
	- 1회 이상 호출될 수 있다.
	- 선택적, 변경 가능성이 있는 의존관계에서 주로 사용된다.

3. 필드 주입
필드에 의존관계를 바로 주입하는 방법이다.
```Java
@Autowired private MemberRepository memberRepository
@Autowired private DiscountPolicy discountPolicy
```
코드가 간결하고 좋아 보이지만, 외부에서의 변경이 불가능하기 때문에 테스트가 힘들고, 따라서 권장되지 않는 방식이다(안티 패턴). 새로운 객체를 생성하여 의존관계를 주입하고싶어도 수정자(setter)를 다시 만들지 않는 이상 불가능하다. 즉 DI프레임워크가 없으면 아무것도 할 수 없다.
	- 실제 환경에서 사용할 일이 없는 테스트 코드에서 사용된다.
	- @Configuration 클래스에서 간혹 사용하기도 한다.(스프링에서만 사용할 것이기 때문)

4. 일반 메소드 주입
일반 메소드(생성자, 수정자 등이 아닌 메소드)를 통해 의존관계를 주입하는 방법이다.
한 번에 여러 필드를 주입할 수 있지만 잘 사용하지는 않는다.

## 옵션 처리


## 생성자 주입의 강점


## 롬복과 최신 트랜드


## 조회 빈이 2개 이상인 경우


## @Autowired 필드 명


## @Qualifier


## @Primary

