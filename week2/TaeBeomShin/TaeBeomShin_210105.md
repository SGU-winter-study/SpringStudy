<h1>스프링 핵심원리 - 4일차(싱글톤 컨테이너) </h1>

## Section 5 싱글톤 컨테이너

: 스프링이 주로 다루는 웹어플리케이션에서 싱글톤 패턴이 왜 필요하고 어떤 식으로 스프링에 
적용되어지고 구현되어 있는지 살펴본다.

### Why need Singletion?

- 싱글톤 패턴 : 클래스의 인스턴스가 딱 1개만 생성되는 것을 보장하는 디자인 패턴

- 스프링 어플리케이션은 웹/모바일 어플리케이션이고 보통 이 어플리케이션에서는 동시간대에 
여러고객이 서버에 접근하고 요청을 한다.

- 싱클레톤을 적용하지 않은 Pure DI컨테이너의 경우 이러한 고객 요청 발생시마다 새로운 객체가
생성되어 시스템의 성능저하가 유발된다.

1. Pure Java를 통한 싱글레톤 구현 

    - static 영역에 instance를 생성하고 인스턴스를 getInstance()를 통해서만 접근 가능하게
    제한한다.

    - 다른 클래스에서 인스턴스를 생성 못하도록 생성자를 private로 정의 한다.

    - 싱글레톤은 구현이 되지만, DIP와 OCP가 위반되고 유연성이 떨어져 적합하지 않다.

2. 스프링 컨테이너를 통한 구현.

: 스프링 컨테이너는 싱글톤으로 객체 인스턴스를 관리하면서도 유연성을 보장한다.
    (위의 문제점들을 해결한다.)

### Thing To Remeber using Singleton Pattern

- 싱글톤 방식은 모든 클라이언트가 하나의 인스턴스를 공유하기 때문에 stateful하게
  설계하면 안된다. 공유값 설정시 개발자의 의도와 다르게 값이 저장/호출되는 오류가 발생한다.

- 그러므로 스프링 컨테이너(스프링 빈)은 Stateless하게 개발해야 한다.

### @Configuration in Spring with Singleton

- 스프링은 Configuration을 적용하여 코드 흐름에 맞게 싱글톤이 보장되도록 조작한다.

- 우리가 만들 클래스가 아니라 바이트 조작 라이브러리를 이용해 AppConfig를 상속 받은
  다른 클래스를 만들고 이를 스프링 빈에 등록한다. 